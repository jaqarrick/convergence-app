(this["webpackJsonpconvergence-client"]=this["webpackJsonpconvergence-client"]||[]).push([[0],{42:function(e,o,n){e.exports=n.p+"static/media/question-logo.7403ca15.svg"},43:function(e,o,n){e.exports=n.p+"static/media/MAIN_LOGO.ee15bd56.svg"},46:function(e,o,n){e.exports=n(89)},51:function(e,o,n){},52:function(e,o,n){},78:function(e,o){},81:function(e,o,n){},82:function(e,o,n){},83:function(e,o,n){},84:function(e,o){function n(e){var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=84},89:function(e,o,n){"use strict";n.r(o);var s=n(0),m=n.n(s),a=n(40),t=n.n(a),i=n(10),c=(n(51),n(3)),r=(n(52),n(1)),k=n(41),l=n.n(k),u=(n(81),n(91)),f=(n(82),function(e){var o=e.direction,n=Object(s.useRef)(0),a=Object(s.useRef)(0),t=Object(s.useRef)(),i=Object(s.useState)(o),r=Object(c.a)(i,2),k=r[0],l=r[1],u=Object(s.useCallback)((function(){a.current=requestAnimationFrame(u),n.current=2*a.current,"right"===k?(n.current<28e3?console.log(n.current):n.current>=28e3&&(t.current.style.transform="translateX(0px)"),t.current.style.transform="translateX(-".concat(n.current,"px)")):"left"===k&&(t.current.style.transform="translateX(".concat(-9e4+n.current,"px)"))}),[k]);return Object(s.useEffect)((function(){l(o),u()}),[l,u,o]),Object(s.useEffect)((function(){return console.log(n)}),[n]),m.a.createElement("div",{ref:t,className:"text-container"},m.a.createElement("span",null,"make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise make some noise"))}),d=function(e){var o=e.direction;return m.a.createElement(f,{direction:o})},b=(n(83),n(42)),v=n.n(b),E=function(){var e=Object(s.useState)(!1),o=Object(c.a)(e,2),n=o[0],a=o[1];return m.a.createElement("div",{className:"info-container"},m.a.createElement("img",{onMouseEnter:function(){a(!0)},onMouseLeave:function(){a(!1)},src:v.a,alt:"question mark"}),m.a.createElement("div",{className:n?"info-text-container active":"info-text-container"},"Convergerge is a virtual space designed for musical collaboration. Customize your performence environment and start creating."))},j=n(43),O=n.n(j),p=function(e){var o=e.updateRoom,n=e.allRooms;e.joinRoom;Object(s.useEffect)((function(){return console.log(n)}),[n]);var a=Object(s.useState)(!0),t=Object(c.a)(a,2),i=t[0],r=t[1],k=Object(s.useCallback)((function(){var e=Object(u.a)();o(e)}),[o]);return m.a.createElement("div",{className:"welcome-container"},m.a.createElement("div",{className:"text-banner-container upper-container"},m.a.createElement(d,{direction:"left"})),m.a.createElement("div",{className:"text-banner-container lower-container"},m.a.createElement(d,{direction:"right"})),m.a.createElement(E,null),m.a.createElement("div",{className:"logo-container"},m.a.createElement("img",{src:O.a,alt:"main logo"})),m.a.createElement("div",{className:"old-welcome"},m.a.createElement("button",{onClick:k}," Join New Room "),m.a.createElement("button",{onClick:function(){return r(!i)}}," ","Join Existing Room"," "),m.a.createElement("div",{className:i?"room-list active":"room-list"},m.a.createElement("ul",null,n.map((function(e){var n=e.roomid;return m.a.createElement("li",{onClick:function(){o(n)},key:n}," ",n," ")}))))))},g=n(44),h=n.n(g),C=function(e){var o=e.message,n=e.match,a=e.currentRoom,t=e.currentPeer,r=e.currentRoomObject,k=e.setCurrentPeer,l=e.updateSocketPeers;Object(s.useEffect)((function(){return console.log(o,a)}),[a,o]);var u=Object(s.useCallback)((function(e){p&&(p.current.srcObject=e)}),[]),f=Object(s.useCallback)((function(e){g&&(g.current.srcObject=e)}),[]),d=Object(s.useState)(),b=Object(c.a)(d,2),v=b[0],E=b[1],j=Object(s.useCallback)((function(){var e=new h.a({host:"localhost",port:9e3,path:"/convergence"});e.on("open",(function(o){k(o),l(a,o),E(e)})),e.on("call",(function(e){navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(o){e.answer(o),e.on("stream",(function(e){u(e),f(o)}))}))}))}),[k,f,a,E,l,u]),O=Object(s.useCallback)((function(e){v&&navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(o){v.call(e,o).on("stream",(function(e){u(e),f(o)}))}))}),[v,u,f]),p=Object(s.useRef)(null),g=Object(s.useRef)(null);return m.a.createElement("div",null," ",m.a.createElement("button",{onClick:j}," Create New Peer "),m.a.createElement("p",null," ",t?"Your peer id is ".concat(t):"You haven't created a peer id yet"," "),m.a.createElement("h1",null," ",null===n||void 0===n?void 0:n.params.roomid," "),m.a.createElement("p",null," ",o," "),m.a.createElement("div",null," ",m.a.createElement("ul",null,null===r||void 0===r?void 0:r.peerids.map((function(e,o){if(e!==t)return m.a.createElement("li",{onClick:function(){return O(e)},key:o}," ",m.a.createElement("button",{onClick:function(){return O(e)}}," ","Call ",e," "))})))),m.a.createElement("div",null," ",m.a.createElement("video",{autoPlay:!0,ref:g}),m.a.createElement("video",{autoPlay:!0,ref:p})),m.a.createElement(i.b,{to:"/"}," Home "))},w=l.a.connect("http://localhost:5000");var R=function(){var e=Object(r.g)(),o=Object(s.useState)(""),n=Object(c.a)(o,2),a=n[0],t=n[1],i=Object(s.useState)(null),k=Object(c.a)(i,2),l=k[0],u=k[1],f=Object(s.useState)(),d=Object(c.a)(f,2),b=d[0],v=d[1],E=Object(s.useState)([]),j=Object(c.a)(E,2),O=j[0],g=j[1];Object(s.useEffect)((function(){v(O.find((function(e){return e.roomid===a})))}),[O,v,a]),Object(s.useEffect)((function(){return console.log(b)}),[b]),w.on("update room list",(function(e){g(e)})),w.on("confirm room join",(function(e){var o=e.message,n=e.roomid;S(o),t(n)}));var h=Object(s.useCallback)((function(o){e.push("/rooms/".concat(o)),t(o),w.emit("update room",o)}),[t,e]),R=Object(s.useCallback)((function(e,o){w.emit("update peers",{roomid:e,peerid:o})}),[]),x=Object(s.useState)(""),N=Object(c.a)(x,2),y=N[0],S=N[1],P=Object(s.useCallback)((function(e){w.emit("join room",e),console.log("You have joined room: ".concat(e))}),[]);return m.a.createElement("div",{className:"wrapper"},m.a.createElement(r.d,null,m.a.createElement(r.b,{exact:!0,path:"/rooms/:roomid",render:function(e){return m.a.createElement(C,Object.assign({},e,{updateSocketPeers:R,setCurrentPeer:u,currentPeer:l,currentRoom:a,currentRoomObject:b,message:y}))}}),m.a.createElement(r.b,{path:"/welcome"},m.a.createElement(p,{allRooms:O,updateRoom:h,joinRoom:P})),m.a.createElement(r.b,{exact:!0,path:"/"},m.a.createElement(r.a,{to:"/welcome"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t.a.render(m.a.createElement(m.a.StrictMode,null,m.a.createElement(i.a,{basename:"/"},m.a.createElement(R,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.7111c0f9.chunk.js.map